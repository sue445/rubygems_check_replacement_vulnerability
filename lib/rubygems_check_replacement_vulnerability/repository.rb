module RubygemsCheckReplacementVulnerability
  class Repository
    def initialize(repo_url, work_dir)
      @repo_url = repo_url
      @work_dir = work_dir
    end

    def git_clone
      Dir.chdir(@work_dir) do
        run("git clone #{@repo_url} .")
      end
    end

    private

    def run(command)
      ret = system(command)
      raise FailedCommandError, "Failed: #{command}" unless ret
    end
  end
end
